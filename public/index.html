<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="preconnect" href="https://graph.microsoft.com">
  <link rel="preconnect" href="https://management.azure.com">
  <meta name="format-detection" content="telephone=no">

  <!-- Title -->
  <title>Azure Subscription ID to Microsoft Entra tenant lookup · sub2tenant</title>

  <!-- Primary SEO -->
  <meta name="description" content="Map any Azure Subscription ID to its Microsoft Entra tenant. sub2tenant performs a fast tenant lookup using Azure Resource Manager and Microsoft Graph and also supports tenant lookups by tenant ID or verified domain. No sign-in required and no lookup data stored.">
  <meta name="keywords" content="Azure subscription ID lookup, subscription GUID lookup, subscription identifier tenant mapping, find tenant from subscription ID, Azure tenant lookup tool, tenantId lookup, domain tenant lookup, Microsoft Entra tenant discovery">
  <meta name="robots" content="index, follow">
  <meta property="og:locale" content="en_US">
  <meta name="theme-color" content="#0b1220">
  <link rel="canonical" href="https://sub2tenant.com/">
  <link rel="alternate" href="https://sub2tenant.com/" hreflang="en" />
  <link rel="alternate" href="https://sub2tenant.com/" hreflang="x-default" />
  
  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg">
  <link rel="alternate icon" href="/assets/icons/favicon-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon-256.png">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://sub2tenant.com/">
  <meta property="og:title" content="Azure Subscription ID to Microsoft Entra tenant lookup · sub2tenant">
  <meta property="og:description" content="Lookup Microsoft Entra tenant details from any Azure Subscription ID, tenant ID or domain: tenantId, displayName and defaultDomainName. No sign-in required and no lookup data stored.">
  <meta property="og:image" content="https://sub2tenant.com/assets/og/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://sub2tenant.com/">
  <meta name="twitter:title" content="Azure Subscription ID to Microsoft Entra tenant lookup · sub2tenant">
  <meta name="twitter:description" content="Lookup Microsoft Entra tenant details from any Azure Subscription ID, tenant ID or domain: tenantId, displayName and defaultDomainName. No sign-in required and no lookup data stored.">
  <meta name="twitter:image" content="https://sub2tenant.com/assets/og/og-image.png">

  <!-- Preload OG Image -->
  <link rel="preload" as="image" href="/assets/og/og-image.png">

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "sub2tenant",
    "url": "https://sub2tenant.com/",
    "description": "Lookup Microsoft Entra tenant information from an Azure Subscription ID, tenant ID or verified domain. sub2tenant uses the Azure Resource Manager WWW-Authenticate header and Microsoft Graph tenantRelationships API to return tenantId, displayName and defaultDomainName. No sign-in required and no lookup data stored.",
    "applicationCategory": "Utility",
    "operatingSystem": "Any",
    "featureList": [
      "Azure Subscription ID to tenant lookup",
      "Tenant ID to tenant details lookup",
      "Domain to tenant lookup",
      "Email address handled by extracting the domain",
      "Uses ARM WWW-Authenticate and Microsoft Graph tenantRelationships",
      "No sign-in required and no lookup data stored"
    ],
    "creator": {
      "@type": "Organization",
      "name": "sub2tenant"
    },
    "about": {
      "@type": "Thing",
      "name": "Azure Subscription, Microsoft Entra ID"
    },
    "sameAs": [
      "https://github.com/olhel/sub2tenant-aca"
    ]
  }
  </script>

  <!-- FAQ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {
        "@type": "Question",
        "name": "How do I find which tenant an Azure Subscription ID belongs to?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Paste the Azure Subscription ID into sub2tenant to perform a subscription-to-tenant lookup using ARM and Microsoft Graph. No sign-in is required and nothing is logged or stored."
        }
      },
      {
        "@type": "Question",
        "name": "Does sub2tenant store any lookup data?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "No. sub2tenant does not log or store subscription IDs, tenant IDs or domains. All lookups happen in memory and are discarded immediately."
        }
      }
    ]
  }
  </script>

  <!-- Breadcrumb list -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Home",
        "item": "https://sub2tenant.com/"
      }
    ]
  }
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <main class="page">
    <section class="hero" aria-labelledby="hero-title">
      <h1 id="hero-title" class="visually-hidden" role="heading" aria-level="1">
        Azure Subscription ID to Microsoft Entra tenant lookup
      </h1>
      <div class="hero-inner">
        <!-- TOP: search bar, status, results -->
        <div class="search-stack">
          <form id="lookup-form" class="hero-form">
            <div class="hero-form-row">
              <input
                id="subscriptionId"
                name="subscriptionId"
                class="hero-input"
                type="text"
                placeholder="Paste a subscription ID, tenant ID, or domain name"
                autocomplete="off"
                spellcheck="false"
                aria-label="Paste a subscription ID, tenant ID, or domain name"
              />

              <!-- Single button: Lookup ↔ Clear -->
              <button
                type="submit"
                class="btn btn-primary btn-lg"
                id="action-btn"
              >
                Lookup
              </button>
            </div>
          </form>

          <div id="status" class="status" aria-live="polite"></div>

          <div id="results-container" class="results results-hidden" aria-live="polite">
            <dl class="result-list" aria-label="Lookup result">
              <div class="result-row" id="subscriptionRow">
                <dt>Subscription ID</dt>
                <dd>
                  <span id="resultSubscriptionId" class="result-value mono muted">–</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="resultSubscriptionId"
                  >
                    Copy
                  </button>
                </dd>
              </div>

              <div class="result-row">
                <dt>Tenant ID</dt>
                <dd>
                  <span id="tenantId" class="result-value mono muted">–</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="tenantId"
                  >
                    Copy
                  </button>
                </dd>
              </div>

              <div class="result-row">
                <dt>Display name</dt>
                <dd>
                  <span id="displayName" class="result-value muted">–</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="displayName"
                  >
                    Copy
                  </button>
                </dd>
              </div>

              <div class="result-row">
                <dt>Default domain</dt>
                <dd>
                  <span id="defaultDomain" class="result-value mono muted">–</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="defaultDomain"
                  >
                    Copy
                  </button>
                </dd>
              </div>
            </dl>
          </div>
        </div>

        <!-- BELOW: title + explanation -->
        <section class="hero-copy">
          <p class="hero-lead">
            <strong>sub2tenant</strong> maps any Azure Subscription ID to its Microsoft Entra tenant.
            It extracts the <code>tenantId</code> from the Azure Resource Manager
            <code>WWW-Authenticate</code> header and uses Microsoft Graph’s
            <code>tenantRelationships</code> API to resolve <code>displayName</code> and
            <code>defaultDomainName</code>. No sign-in, no logging, no stored lookup data.
          </p>

          <p class="hero-lead hero-lead-secondary">
            Also supports tenant lookups by tenant ID or verified domain name — all in one input field.
          </p>
        </section>
      </div>
    </section>
   
    <div class="visually-hidden">
      <h2>Azure Subscription to tenant lookup</h2>
      <p>
        sub2tenant lets you find which Microsoft Entra tenant an Azure subscription belongs to. It supports
        lookups using an Azure Subscription ID (also called a subscription GUID or subscription identifier),
        allowing administrators to determine the owning tenant when only the subscription ID is known from
        logs, alerts, invoices or automation systems. The service performs an unauthenticated Azure Resource
        Manager request to read the tenant value from the <code>WWW-Authenticate</code> header and resolves
        tenant details using Microsoft Graph's <code>tenantRelationships</code> API.
      </p>
      <p>
        This page also covers the Azure subscription ID tenant lookup tool scenario, where the goal is to
        quickly determine the tenant behind a subscription GUID without portal access or elevated roles.
      </p>     

      <h2>Tenant ID and domain lookups</h2>
      <p>
        The tool also returns tenant information when a Microsoft Entra tenant ID is supplied, providing the
        <code>tenantId</code>, <code>displayName</code> and <code>defaultDomainName</code>. Domain lookups are
        supported for verified Microsoft 365 and Entra domains, enabling quick identification of which tenant
        owns a given domain.
      </p>

      <h2>Email address handling</h2>
      <p>
        Email addresses are accepted for convenience: sub2tenant extracts the apex domain from the email
        address and performs the same domain-to-tenant lookup. This is useful when only an email is available
        during troubleshooting or incident response and you still need to identify the underlying tenant.
      </p>

      <h2>Related subscription and tenant queries</h2>
      <p>
        Typical use cases include: find tenant from subscription ID, map subscription ID to tenant, lookup
        tenant by subscription GUID, determine which tenant owns a given subscription, identify the tenant
        from a domain, perform a tenant ID lookup, and handle subscription tenant mapping for MSPs and cloud
        operations teams.
      </p>
      <p>sub2tenant is a lightweight Azure tenant lookup utility for subscription-to-tenant mapping, tenant discovery and quick Microsoft Entra troubleshooting.</p>
      <p>Categories: Azure tool, Microsoft Entra lookup, subscription tenant mapping.</p>
    </div>


    <div id="cookie-banner" class="cookie-banner" hidden>
      <p>
        Added Google Analytics to see if this is actually useful to people. No ads or marketing tracking.
      </p>
      <div class="cookie-actions">
        <button id="cookie-accept">Accept</button>
        <button id="cookie-reject">Reject</button>
      </div>
    </div>

  </main>

<footer class="footer">
  <div class="footer-inner">
    <span class="footer-links">
      <a href="https://github.com/olhel/sub2tenant-aca" target="_blank">Source on GitHub</a>
    </span>
  </div>
</footer>

  <script>
    const subscriptionRowEl = document.getElementById("subscriptionRow");
    const form = document.getElementById("lookup-form");
    const subscriptionInput = document.getElementById("subscriptionId");
    const statusEl = document.getElementById("status");
    const actionBtn = document.getElementById("action-btn");
    const resultsContainer = document.getElementById("results-container");

    const subscriptionResultEl = document.getElementById("resultSubscriptionId");
    const tenantIdEl = document.getElementById("tenantId");
    const displayNameEl = document.getElementById("displayName");
    const defaultDomainEl = document.getElementById("defaultDomain");
    const copyButtons = document.querySelectorAll(".copy-btn");

    let buttonMode = "lookup"; // "lookup" or "clear"
    let buttonLabel = "Lookup";

    function setStatus(message, type = "info") {
      statusEl.textContent = message || "";
      statusEl.className = "status" + (message ? " status-" + type : "");
    }

    function setResults({ subscriptionId, tenantId, displayName, defaultDomain, mode } = {}) {
      if (mode === "tenantId" || mode === "domain") {
        subscriptionRowEl.style.display = "none";
      } else {
        subscriptionRowEl.style.display = "";
      }

      subscriptionResultEl.textContent = subscriptionId || "–";
      tenantIdEl.textContent = tenantId || "–";
      displayNameEl.textContent = displayName || "–";
      defaultDomainEl.textContent = defaultDomain || "–";

      subscriptionResultEl.classList.toggle("muted", !subscriptionId);
      tenantIdEl.classList.toggle("muted", !tenantId);
      displayNameEl.classList.toggle("muted", !displayName);
      defaultDomainEl.classList.toggle("muted", !defaultDomain);
    }

    function showResults() {
      resultsContainer.classList.remove("results-hidden");
      resultsContainer.classList.add("results-visible");
    }

    function hideResults() {
      resultsContainer.classList.add("results-hidden");
      resultsContainer.classList.remove("results-visible");
    }

function setButtonLabel(label, mode) {
  buttonLabel = label;
  buttonMode = mode;
  actionBtn.textContent = label;

  if (mode === "lookup") {
    actionBtn.classList.remove("btn-ghost");
    actionBtn.classList.add("btn-primary");
  } else {
    actionBtn.classList.remove("btn-primary");
    actionBtn.classList.add("btn-ghost");
  }
}


    function setLoading(isLoading) {
      actionBtn.disabled = isLoading;
      if (isLoading) {
        actionBtn.textContent = "Looking up…";
      } else {
        actionBtn.textContent = buttonLabel;
      }
    }

    function resetAll() {
      document.body.classList.remove("has-results");  // <-- add this line
      subscriptionInput.value = "";
      setResults();
      setStatus("");
      hideResults();
      setButtonLabel("Lookup", "lookup");
      subscriptionInput.focus();
    }

    copyButtons.forEach((btn) => {
      btn.addEventListener("click", async () => {
        const targetId = btn.getAttribute("data-copy-target");
        const targetEl = document.getElementById(targetId);
        if (!targetEl) return;

        const value = (targetEl.textContent || "").trim();
        if (!value || value === "–") return;

        try {
          await navigator.clipboard.writeText(value);
          const original = btn.textContent;
          btn.classList.add("copy-btn-copied");
          btn.textContent = "Copied";
          setTimeout(() => {
            btn.classList.remove("copy-btn-copied");
            btn.textContent = original;
          }, 1100);
        } catch {
          setStatus("Could not copy to clipboard.", "error");
        }
      });
    });

    async function performLookup() {
      const input = subscriptionInput.value.trim();

      if (!input) {
        setStatus("Please enter a subscription ID, tenant ID, or domain name.", "error");
        hideResults();
        return;
      }

      setStatus("", "info");
      setResults();
      setLoading(true);
      hideResults();

      try {
        const res = await fetch("/api/lookup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ subscriptionId: input }),
        });

        if (!res.ok) {
          let message = "Lookup failed.";
          try {
            const err = await res.json();
            if (err?.error) message = err.error;
          } catch {}
          throw new Error(message);
        }

        const data = await res.json();

        setResults({
          subscriptionId: data.mode === "subscriptionId" ? data.subscriptionId : null,
          tenantId: data.tenantId,
          displayName: data.displayName,
          defaultDomain: data.defaultDomain,
          mode: data.mode,
        });

        let suffix = "";
        if (data.mode === "subscriptionId") suffix = "Subscription ID ";
        else if (data.mode === "tenantId") suffix = "Tenant ID ";
        else if (data.mode === "domain") suffix = "Domain ";

        setStatus(suffix + "lookup completed.", "success");
        showResults();
        document.body.classList.add("has-results"); 

        // After success, switch to Clear mode
        setButtonLabel("Clear", "clear");
      } catch (err) {
        setResults();
        setStatus(err.message || "Lookup failed.", "error");
        hideResults();
        setButtonLabel("Clear", "clear");   // <-- Correct behavior
      } finally {
        setLoading(false);
      }
    }

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      if (buttonMode === "lookup") {
        performLookup();
      } else {
        resetAll();
      }
    });

    actionBtn.addEventListener("click", (event) => {
      event.preventDefault();
      if (buttonMode === "lookup") {
        performLookup();
      } else {
        resetAll();
      }
    });

    subscriptionInput.addEventListener("input", () => {
      // If we were in Clear mode (after a previous lookup),
      // switch back to Lookup as soon as user types or pastes.
      if (buttonMode === "clear") {
        setButtonLabel("Lookup", "lookup");
      }

      // Optional: if they completely clear the field, also clear status/results
      if (!subscriptionInput.value.trim()) {
        setStatus("");
        hideResults();
      }
    });


    // Initial state
    setResults();
    hideResults();
    setButtonLabel("Lookup", "lookup");
  </script>

  <script>
    function updatePlaceholder() {
      const input = document.querySelector('.hero-input');
      if (!input) return;

      if (window.innerWidth < 720) {
        input.placeholder = "Subscription ID, tenant ID or domain";
      } else {
        input.placeholder = "Paste a subscription ID, tenant ID, or domain name";
      }
    }

    window.addEventListener('resize', updatePlaceholder);
    window.addEventListener('DOMContentLoaded', updatePlaceholder);
  </script>

  <script>
  (function () {
    const CONSENT_KEY = "cookie-consent";
    const EU_COUNTRIES = [
      // EU
      "AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU",
      "IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE",
      // EEA
      "NO","IS","LI",
      // UK + CH
      "GB","UK","CH"
    ];

    const banner = document.getElementById("cookie-banner");
    const acceptBtn = document.getElementById("cookie-accept");
    const rejectBtn = document.getElementById("cookie-reject");

    function showBanner() {
      if (banner) banner.hidden = false;
    }

    function hideBanner() {
      if (banner) banner.hidden = true;
    }

    function loadGA() {
      if (window.__gaLoaded) return; // avoid double loading
      window.__gaLoaded = true;

      // GA4 loader
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;

      const gtagScript = document.createElement("script");
      gtagScript.async = true;
      gtagScript.src = "https://www.googletagmanager.com/gtag/js?id=G-J7FYT7CEV5";
      document.head.appendChild(gtagScript);

      gtag("js", new Date());
      gtag("config", "G-J7FYT7CEV5", {
        anonymize_ip: true,
        allow_ad_personalization_signals: false
      });
    }

    function handleEUFlow() {
      const stored = localStorage.getItem(CONSENT_KEY);

      if (stored === "accepted") {
        loadGA();
        return;
      }

      if (stored === "rejected") {
        return; // user said no → no GA
      }

      // No choice yet → show banner and wait
      showBanner();

      if (acceptBtn) {
        acceptBtn.addEventListener("click", function () {
          localStorage.setItem(CONSENT_KEY, "accepted");
          hideBanner();
          loadGA();
        });
      }

      if (rejectBtn) {
        rejectBtn.addEventListener("click", function () {
          localStorage.setItem(CONSENT_KEY, "rejected");
          hideBanner();
        });
      }
    }

    function init() {
      // Geo lookup: ipapi.co returns a 2-letter country code as plain text
      fetch("https://ipapi.co/country/")
        .then(function (resp) {
          if (!resp.ok) throw new Error("Geo lookup failed");
          return resp.text();
        })
        .then(function (code) {
          const country = (code || "").trim().toUpperCase();

          if (EU_COUNTRIES.includes(country)) {
            // EU/EEA/UK/CH → consent flow
            handleEUFlow();
          } else {
            // Rest of world → no banner, GA loads directly
            loadGA();
          }
        })
        .catch(function () {
          // If geo fails, play it safe and treat as EU
          handleEUFlow();
        });
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", init);
    } else {
      init();
    }
  })();
  </script>


</body>
</html>
