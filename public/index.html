<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Title -->
  <title>Azure Subscription ID to Microsoft Entra tenant lookup ¬∑ sub2tenant</title>

  <!-- Primary SEO -->
  <meta name="description" content="Paste any Azure Subscription ID and instantly see which Microsoft Entra tenant it belongs to. sub2tenant maps subscription IDs, tenant IDs or domains to tenantId, displayName and defaultDomainName using Azure Resource Manager and Microsoft Graph. No sign-in required and no lookup data stored.">
  <meta name="keywords" content="Azure subscription ID lookup, Azure subscription to tenant, find Microsoft Entra tenant from subscription ID, Azure tenant lookup, tenantId lookup, defaultDomainName lookup, ARM WWW-Authenticate, Microsoft Graph tenantRelationships, MSP tools">
  <link rel="canonical" href="https://sub2tenant.com/">

  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg">
  <link rel="alternate icon" href="/assets/icons/favicon-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon-256.png">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://sub2tenant.com/">
  <meta property="og:title" content="Azure Subscription ID to Microsoft Entra tenant lookup ¬∑ sub2tenant">
  <meta property="og:description" content="Lookup Microsoft Entra tenant details from any Azure Subscription ID, tenant ID or domain: tenantId, displayName and defaultDomainName. No sign-in required and no lookup data stored.">
  <meta property="og:image" content="https://sub2tenant.com/assets/og/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://sub2tenant.com/">
  <meta name="twitter:title" content="Azure Subscription ID to Microsoft Entra tenant lookup ¬∑ sub2tenant">
  <meta name="twitter:description" content="Lookup Microsoft Entra tenant details from any Azure Subscription ID, tenant ID or domain: tenantId, displayName and defaultDomainName. No sign-in required and no lookup data stored.">
  <meta name="twitter:image" content="https://sub2tenant.com/assets/og/og-image.png">

  <!-- Preload OG Image -->
  <link rel="preload" as="image" href="/assets/og/og-image.png">

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "sub2tenant",
    "url": "https://sub2tenant.com/",
    "description": "Paste any Azure Subscription ID, tenant ID or domain and instantly find the associated Microsoft Entra tenant. Sub2tenant uses the Azure Resource Manager WWW-Authenticate header and Microsoft Graph tenantRelationships API to return tenantId, displayName and defaultDomainName. No sign-in required and no lookup data stored.",
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Any",
    "creator": {
      "@type": "Organization",
      "name": "sub2tenant.com"
    },
    "featureList": [
      "Lookup Microsoft Entra tenant from Azure Subscription ID",
      "Returns tenantId, displayName and defaultDomainName",
      "Supports subscription ID, tenant ID and domain lookups",
      "Uses ARM WWW-Authenticate header and Microsoft Graph tenantRelationships API",
      "No sign-in required and no lookup data stored",
      "find tenant from subscription id"
    ]
  }
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <main class="page">
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-inner">

        <!-- TOP: search bar, status, results -->
        <div class="search-stack">
          <form id="lookup-form" class="hero-form">
            <div class="hero-form-row">
              <input
                id="subscriptionId"
                name="subscriptionId"
                class="hero-input"
                type="text"
                placeholder="Paste a subscription ID, tenant ID, or domain name"
                autocomplete="off"
                spellcheck="false"
                aria-label="Paste a subscription ID, tenant ID, or domain name"
              />

              <!-- Single button: Lookup ‚Üî Clear -->
              <button
                type="submit"
                class="btn btn-primary btn-lg"
                id="action-btn"
              >
                Lookup
              </button>
            </div>
          </form>

          <div id="status" class="status" aria-live="polite"></div>

          <div id="results-container" class="results results-hidden" aria-live="polite">
            <dl class="result-list" aria-label="Lookup result">
              <div class="result-row" id="subscriptionRow">
                <dt>Subscription ID</dt>
                <dd>
                  <span id="resultSubscriptionId" class="result-value mono muted">‚Äì</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="resultSubscriptionId"
                  >
                    Copy
                  </button>
                </dd>
              </div>

              <div class="result-row">
                <dt>Tenant ID</dt>
                <dd>
                  <span id="tenantId" class="result-value mono muted">‚Äì</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="tenantId"
                  >
                    Copy
                  </button>
                </dd>
              </div>

              <div class="result-row">
                <dt>Display name</dt>
                <dd>
                  <span id="displayName" class="result-value muted">‚Äì</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="displayName"
                  >
                    Copy
                  </button>
                </dd>
              </div>

              <div class="result-row">
                <dt>Default domain</dt>
                <dd>
                  <span id="defaultDomain" class="result-value mono muted">‚Äì</span>
                  <button
                    type="button"
                    class="btn-icon copy-btn"
                    data-copy-target="defaultDomain"
                  >
                    Copy
                  </button>
                </dd>
              </div>
            </dl>
          </div>
        </div>

        <!-- BELOW: title + explanation -->
      <section class="hero-copy">
        <p class="hero-lead">
          <strong>Sub2tenant</strong> is a small utility that tells you which Microsoft Entra tenant owns an Azure Subscription ID.
          It returns <code>tenantId</code>, <code>displayName</code> and <code>defaultDomainName</code> by using
          the Azure Resource Manager <code>WWW-Authenticate</code> header and Microsoft Graph‚Äôs
          <code>tenantRelationships</code> API. No sign in required and no lookup data stored.
        </p>

        <p class="hero-lead hero-lead-secondary">
          It also supports direct lookups by tenant ID or domain name.
        </p>
      </section>
      </div>
    </section>
   
    <div class="visually-hidden">
      <h2>What is sub2tenant?</h2>
      <p>
        sub2tenant is a small Azure utility that lets you find which Microsoft Entra ID tenant
        an Azure Subscription ID, tenant ID or domain name belongs to. It is useful for MSPs,
        cloud admins and incident responders who receive only a subscription ID in a ticket,
        alert, invoice or report and need to quickly identify the owning tenant.
      </p>

      <h2>How does the Azure Subscription ID to tenant lookup work?</h2>
      <p>
        When you paste a subscription ID, sub2tenant makes an unauthenticated call to the Azure
        Resource Manager endpoint and reads the <code>WWW-Authenticate</code> header to discover
        the tenant. It then uses Microsoft Graph‚Äôs <code>tenantRelationships</code> API
        (<code>findTenantInformationByTenantId</code>) to return the tenantId, displayName and
        defaultDomainName for that Microsoft Entra tenant.
      </p>

      <h2>Does sub2tenant store any subscription or tenant data?</h2>
      <p>
        No. The tool does not log or store subscription IDs, tenant IDs or domains. It performs
        the lookup in memory, returns the tenant information to your browser and discards the
        values. Only standard sign-in activity for the managed identity calling Microsoft Graph
        appears in the author‚Äôs own tenant.
      </p>

      <h2>Can I look up a tenant by domain or tenant ID?</h2>
      <p>
        Yes. In addition to Azure Subscription ID to tenant lookups, sub2tenant supports direct
        lookups by Microsoft Entra tenant ID or verified domain name. This makes it easy to
        confirm tenant details when you already know the tenant identifier but still want
        display name or default domain information.
      </p>
    </div>

    <div id="cookie-banner" class="cookie-banner" hidden>
      <p>
        I added Google Analytics to see if this is actually useful to people. No ads or marketing tracking.
      </p>
      <div class="cookie-actions">
        <button id="cookie-accept">Accept</button>
        <button id="cookie-reject">Reject</button>
      </div>
    </div>

  </main>

<footer class="footer">
  <div class="footer-inner">
    <span class="footer-links">
      <a href="https://github.com/olhel/sub2tenant-aca" target="_blank">Source on GitHub</a>
      <span class="sep">‚Ä¢</span>
      <a href="https://buymeacoffee.com/olhel" target="_blank">Buy me a beer üç∫</a>
    </span>
  </div>
</footer>

  <script>
    const subscriptionRowEl = document.getElementById("subscriptionRow");
    const form = document.getElementById("lookup-form");
    const subscriptionInput = document.getElementById("subscriptionId");
    const statusEl = document.getElementById("status");
    const actionBtn = document.getElementById("action-btn");
    const resultsContainer = document.getElementById("results-container");

    const subscriptionResultEl = document.getElementById("resultSubscriptionId");
    const tenantIdEl = document.getElementById("tenantId");
    const displayNameEl = document.getElementById("displayName");
    const defaultDomainEl = document.getElementById("defaultDomain");
    const copyButtons = document.querySelectorAll(".copy-btn");

    let buttonMode = "lookup"; // "lookup" or "clear"
    let buttonLabel = "Lookup";

    function setStatus(message, type = "info") {
      statusEl.textContent = message || "";
      statusEl.className = "status" + (message ? " status-" + type : "");
    }

    function setResults({ subscriptionId, tenantId, displayName, defaultDomain, mode } = {}) {
      if (mode === "tenantId" || mode === "domain") {
        subscriptionRowEl.style.display = "none";
      } else {
        subscriptionRowEl.style.display = "";
      }

      subscriptionResultEl.textContent = subscriptionId || "‚Äì";
      tenantIdEl.textContent = tenantId || "‚Äì";
      displayNameEl.textContent = displayName || "‚Äì";
      defaultDomainEl.textContent = defaultDomain || "‚Äì";

      subscriptionResultEl.classList.toggle("muted", !subscriptionId);
      tenantIdEl.classList.toggle("muted", !tenantId);
      displayNameEl.classList.toggle("muted", !displayName);
      defaultDomainEl.classList.toggle("muted", !defaultDomain);
    }

    function showResults() {
      resultsContainer.classList.remove("results-hidden");
      resultsContainer.classList.add("results-visible");
    }

    function hideResults() {
      resultsContainer.classList.add("results-hidden");
      resultsContainer.classList.remove("results-visible");
    }

function setButtonLabel(label, mode) {
  buttonLabel = label;
  buttonMode = mode;
  actionBtn.textContent = label;

  if (mode === "lookup") {
    actionBtn.classList.remove("btn-ghost");
    actionBtn.classList.add("btn-primary");
  } else {
    actionBtn.classList.remove("btn-primary");
    actionBtn.classList.add("btn-ghost");
  }
}


    function setLoading(isLoading) {
      actionBtn.disabled = isLoading;
      if (isLoading) {
        actionBtn.textContent = "Looking up‚Ä¶";
      } else {
        actionBtn.textContent = buttonLabel;
      }
    }

    function resetAll() {
      subscriptionInput.value = "";
      setResults();
      setStatus("");
      hideResults();
      setButtonLabel("Lookup", "lookup");
      subscriptionInput.focus();
    }

    copyButtons.forEach((btn) => {
      btn.addEventListener("click", async () => {
        const targetId = btn.getAttribute("data-copy-target");
        const targetEl = document.getElementById(targetId);
        if (!targetEl) return;

        const value = (targetEl.textContent || "").trim();
        if (!value || value === "‚Äì") return;

        try {
          await navigator.clipboard.writeText(value);
          const original = btn.textContent;
          btn.classList.add("copy-btn-copied");
          btn.textContent = "Copied";
          setTimeout(() => {
            btn.classList.remove("copy-btn-copied");
            btn.textContent = original;
          }, 1100);
        } catch {
          setStatus("Could not copy to clipboard.", "error");
        }
      });
    });

    async function performLookup() {
      const input = subscriptionInput.value.trim();

      if (!input) {
        setStatus("Please enter a subscription ID, tenant ID, or domain name.", "error");
        hideResults();
        return;
      }

      setStatus("Looking up‚Ä¶", "info");
      setResults();
      setLoading(true);
      hideResults();

      try {
        const res = await fetch("/api/lookup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ subscriptionId: input }),
        });

        if (!res.ok) {
          let message = "Lookup failed.";
          try {
            const err = await res.json();
            if (err?.error) message = err.error;
          } catch {}
          throw new Error(message);
        }

        const data = await res.json();

        setResults({
          subscriptionId: data.mode === "subscriptionId" ? data.subscriptionId : null,
          tenantId: data.tenantId,
          displayName: data.displayName,
          defaultDomain: data.defaultDomain,
          mode: data.mode,
        });

        let suffix = "";
        if (data.mode === "subscriptionId") suffix = "Subscription ID ";
        else if (data.mode === "tenantId") suffix = "Tenant ID ";
        else if (data.mode === "domain") suffix = "Domain ";

        setStatus(suffix + "lookup completed.", "success");
        showResults();

        // After success, switch to Clear mode
        setButtonLabel("Clear", "clear");
      } catch (err) {
        setResults();
        setStatus(err.message || "Lookup failed.", "error");
        hideResults();
        setButtonLabel("Clear", "clear");   // <-- Correct behavior
      } finally {
        setLoading(false);
      }
    }

    form.addEventListener("submit", (event) => {
      event.preventDefault();
      if (buttonMode === "lookup") {
        performLookup();
      } else {
        resetAll();
      }
    });

    actionBtn.addEventListener("click", (event) => {
      event.preventDefault();
      if (buttonMode === "lookup") {
        performLookup();
      } else {
        resetAll();
      }
    });

    subscriptionInput.addEventListener("input", () => {
      // If we were in Clear mode (after a previous lookup),
      // switch back to Lookup as soon as user types or pastes.
      if (buttonMode === "clear") {
        setButtonLabel("Lookup", "lookup");
      }

      // Optional: if they completely clear the field, also clear status/results
      if (!subscriptionInput.value.trim()) {
        setStatus("");
        hideResults();
      }
    });


    // Initial state
    setResults();
    hideResults();
    setButtonLabel("Lookup", "lookup");
  </script>

  <script>
    function updatePlaceholder() {
      const input = document.querySelector('.hero-input');
      if (!input) return;

      if (window.innerWidth < 720) {
        input.placeholder = "Subscription ID, tenant ID or domain";
      } else {
        input.placeholder = "Paste a subscription ID, tenant ID, or domain name";
      }
    }

    window.addEventListener('resize', updatePlaceholder);
    window.addEventListener('DOMContentLoaded', updatePlaceholder);
  </script>

  <script>
  (function () {
    const CONSENT_KEY = "cookie-consent";
    const EU_COUNTRIES = [
      // EU
      "AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU",
      "IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE",
      // EEA
      "NO","IS","LI",
      // UK + CH
      "GB","UK","CH"
    ];

    const banner = document.getElementById("cookie-banner");
    const acceptBtn = document.getElementById("cookie-accept");
    const rejectBtn = document.getElementById("cookie-reject");

    function showBanner() {
      if (banner) banner.hidden = false;
    }

    function hideBanner() {
      if (banner) banner.hidden = true;
    }

    function loadGA() {
      if (window.__gaLoaded) return; // avoid double loading
      window.__gaLoaded = true;

      // GA4 loader
      window.dataLayer = window.dataLayer || [];
      function gtag(){ dataLayer.push(arguments); }
      window.gtag = gtag;

      const gtagScript = document.createElement("script");
      gtagScript.async = true;
      gtagScript.src = "https://www.googletagmanager.com/gtag/js?id=G-J7FYT7CEV5";
      document.head.appendChild(gtagScript);

      gtag("js", new Date());
      gtag("config", "G-J7FYT7CEV5", {
        anonymize_ip: true,
        allow_ad_personalization_signals: false
      });
    }

    function handleEUFlow() {
      const stored = localStorage.getItem(CONSENT_KEY);

      if (stored === "accepted") {
        loadGA();
        return;
      }

      if (stored === "rejected") {
        return; // user said no ‚Üí no GA
      }

      // No choice yet ‚Üí show banner and wait
      showBanner();

      if (acceptBtn) {
        acceptBtn.addEventListener("click", function () {
          localStorage.setItem(CONSENT_KEY, "accepted");
          hideBanner();
          loadGA();
        });
      }

      if (rejectBtn) {
        rejectBtn.addEventListener("click", function () {
          localStorage.setItem(CONSENT_KEY, "rejected");
          hideBanner();
        });
      }
    }

    function init() {
      // Geo lookup: ipapi.co returns a 2-letter country code as plain text
      fetch("https://ipapi.co/country/")
        .then(function (resp) {
          if (!resp.ok) throw new Error("Geo lookup failed");
          return resp.text();
        })
        .then(function (code) {
          const country = (code || "").trim().toUpperCase();

          if (EU_COUNTRIES.includes(country)) {
            // EU/EEA/UK/CH ‚Üí consent flow
            handleEUFlow();
          } else {
            // Rest of world ‚Üí no banner, GA loads directly
            loadGA();
          }
        })
        .catch(function () {
          // If geo fails, play it safe and treat as EU
          handleEUFlow();
        });
    }

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", init);
    } else {
      init();
    }
  })();
  </script>


</body>
</html>
