<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-J7FYT7CEV5"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-J7FYT7CEV5', {
      anonymize_ip: true,
      allow_ad_personalization_signals: false
    });
  </script>

  <!-- Title -->
  <title>Find Microsoft Entra Tenant from Azure Subscription ID ¬∑ sub2tenant</title>

  <!-- Primary SEO -->
  <meta name="description" content="Paste any Azure Subscription ID and instantly find the associated Microsoft Entra tenant. sub2tenant uses the Azure Resource Manager WWW-Authenticate header and Microsoft Graph to return tenantId, displayName, and default domain. No sign-in required and no data stored.">
  <meta name="keywords" content="Azure subscription tenant lookup, find Azure tenant from Subscription ID, Azure Entra tenant, tenantId lookup, defaultDomainName lookup, ARM WWW-Authenticate, Microsoft Graph, MSP tools">
  <link rel="canonical" href="https://sub2tenant.com/">

  <!-- Favicons -->
  <link rel="icon" type="image/svg+xml" href="/assets/icons/favicon.svg">

  <!-- PNG fallbacks -->
  <link rel="alternate icon" href="/assets/icons/favicon-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/favicon-256.png">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://sub2tenant.com/">
  <meta property="og:title" content="Find Microsoft Entra Tenant from Azure Subscription ID ¬∑ sub2tenant">
  <meta property="og:description" content="Lookup Microsoft Entra tenant details from any Azure Subscription ID: tenantId, displayName and defaultDomainName. No sign-in required and no data stored.">
  <meta property="og:image" content="https://sub2tenant.com/assets/og/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://sub2tenant.com/">
  <meta name="twitter:title" content="Find Microsoft Entra Tenant from Azure Subscription ID ¬∑ sub2tenant">
  <meta name="twitter:description" content="Lookup Microsoft Entra tenant details from any Azure Subscription ID: tenantId, displayName and defaultDomainName. No sign-in required and no data stored.">
  <meta name="twitter:image" content="https://sub2tenant.com/assets/og/og-image.png">

  <!-- Preload OG Image -->
  <link rel="preload" as="image" href="/assets/og/og-image.png">

  <!-- Schema.org JSON-LD -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "sub2tenant",
    "url": "https://sub2tenant.com/",
    "description": "Paste any Azure Subscription ID and instantly find the associated Microsoft Entra tenant. sub2tenant uses the Azure Resource Manager WWW-Authenticate header and Microsoft Graph to return tenantId, displayName, and default domain. No sign-in required and no data stored.",
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Any",
    "creator": {
      "@type": "Organization",
      "name": "sub2tenant.com"
    },
    "featureList": [
      "Lookup Microsoft Entra tenant from Azure Subscription ID",
      "Returns tenantId, displayName and defaultDomainName",
      "Uses ARM WWW-Authenticate header and Microsoft Graph",
      "No sign-in required and no data stored."
    ]
  }
  </script>

  <!-- Styles -->
  <link rel="stylesheet" href="/styles.css">
</head>

<body>
  <header class="nav">
    <div class="nav-inner">
      <div class="nav-left">
        <a href="/" class="brand-link">sub2tenant.com</a>
      </div>
      <div class="nav-center"></div>
      <div class="nav-right"></div>
    </div>
  </header>

  <main class="wrap">
    <section class="card">
      <div class="card-inner">
        <h1 class="card-title">Find Microsoft Entra Tenant from Azure Subscription ID</h1>

        <p class="lead">
          This tool resolves <code>tenantId</code>, <code>displayName</code> and
          <code>defaultDomainName</code> for an Azure Subscription ID using the Azure Resource Manager
          <code>WWW-Authenticate</code> header and Microsoft Graph‚Äôs
          <code>findTenantInformationByTenantId</code> endpoint.
        </p>

        <form id="lookup-form" class="form">
          <div class="form-row">
            <input
              id="subscriptionId"
              name="subscriptionId"
              class="input"
              type="text"
              placeholder="00000000-0000-0000-0000-000000000000"
              autocomplete="off"
              spellcheck="false"
              aria-label="Subscription ID"
            />

            <button
              type="submit"
              class="btn btn-primary btn-sm"
              id="lookup-btn"
            >
              Lookup
            </button>

            <button
              type="button"
              id="clear-btn"
              class="btn btn-secondary btn-sm form-clear"
            >
              Clear
            </button>
          </div>
        </form>

        <div id="status" class="status" aria-live="polite"></div>

        <div id="results-container" class="results-hidden">
          <dl class="result" aria-label="Lookup result">

            <!-- Subscription ID row -->
            <div class="result-row">
              <dt>Subscription ID</dt>
              <dd class="result-value">
                <span id="resultSubscriptionId" class="mono muted">‚Äì</span>
                <button
                  type="button"
                  class="btn-icon copy-btn"
                  data-copy-target="resultSubscriptionId"
                >
                  Copy
                </button>
              </dd>
            </div>

            <div class="result-row">
              <dt>Tenant ID</dt>
              <dd class="result-value">
                <span id="tenantId" class="mono muted">‚Äì</span>
                <button
                  type="button"
                  class="btn-icon copy-btn"
                  data-copy-target="tenantId"
                >
                  Copy
                </button>
              </dd>
            </div>

            <div class="result-row">
              <dt>Display name</dt>
              <dd class="result-value">
                <span id="displayName" class="muted">‚Äì</span>
                <button
                  type="button"
                  class="btn-icon copy-btn"
                  data-copy-target="displayName"
                >
                  Copy
                </button>
              </dd>
            </div>

            <div class="result-row">
              <dt>Default domain</dt>
              <dd class="result-value">
                <span id="defaultDomain" class="mono muted">‚Äì</span>
                <button
                  type="button"
                  class="btn-icon copy-btn"
                  data-copy-target="defaultDomain"
                >
                  Copy
                </button>
              </dd>
            </div>
          </dl>
        </div>
      </div>
    </section>

    <div class="support-block">
      <p>If this tool saved you time, you can:</p>
      <a
        href="https://buymeacoffee.com/olhel"
        target="_blank"
        class="btn btn-primary btn-sm support-btn"
      >
        Buy me a beer üç∫
      </a>
    </div>

    <div class="visually-hidden">
      sub2tenant lets you find which Microsoft Entra tenant an Azure Subscription ID belongs to
      using the Azure Resource Manager (ARM) WWW-Authenticate header and Microsoft Graph. 
      No sign-in required, and no lookup data stored.
    </div>

  </main>

  <footer class="footer">
    <div class="footer-inner">
      <span>¬© 2025 sub2tenant.com ¬∑ <a href="https://github.com/olhel/sub2tenant-aca" target="_blank" style="color: var(--text-muted); text-decoration: none;">
  Source on GitHub
</a></span>
    </div>
  </footer>

  <script>
    const form = document.getElementById("lookup-form");
    const subscriptionInput = document.getElementById("subscriptionId");
    const statusEl = document.getElementById("status");
    const clearBtn = document.getElementById("clear-btn");
    const lookupBtn = document.getElementById("lookup-btn");
    const resultsContainer = document.getElementById("results-container");

    const subscriptionResultEl = document.getElementById("resultSubscriptionId");
    const tenantIdEl = document.getElementById("tenantId");
    const displayNameEl = document.getElementById("displayName");
    const defaultDomainEl = document.getElementById("defaultDomain");
    const copyButtons = document.querySelectorAll(".copy-btn");

    function setStatus(message, type = "info") {
      statusEl.textContent = message || "";
      statusEl.className = "status" + (message ? " status-" + type : "");
    }

    function setResults({ subscriptionId, tenantId, displayName, defaultDomain } = {}) {
      subscriptionResultEl.textContent = subscriptionId || "‚Äì";
      tenantIdEl.textContent = tenantId || "‚Äì";
      displayNameEl.textContent = displayName || "‚Äì";
      defaultDomainEl.textContent = defaultDomain || "‚Äì";

      subscriptionResultEl.classList.toggle("muted", !subscriptionId);
      tenantIdEl.classList.toggle("muted", !tenantId);
      displayNameEl.classList.toggle("muted", !displayName);
      defaultDomainEl.classList.toggle("muted", !defaultDomain);
    }

    function setLoading(isLoading) {
      lookupBtn.disabled = isLoading;
      lookupBtn.textContent = isLoading ? "Looking up‚Ä¶" : "Lookup";
    }

    function showResults() {
      resultsContainer.classList.remove("results-hidden");
      resultsContainer.classList.add("results-visible");
    }

    function hideResults() {
      resultsContainer.classList.add("results-hidden");
      resultsContainer.classList.remove("results-visible");
    }

    // Copy buttons
    copyButtons.forEach((btn) => {
      btn.addEventListener("click", async () => {
        const targetId = btn.getAttribute("data-copy-target");
        const targetEl = document.getElementById(targetId);
        if (!targetEl) return;

        const value = (targetEl.textContent || "").trim();
        if (!value || value === "‚Äì") return;

        try {
          await navigator.clipboard.writeText(value);
          const original = btn.textContent;
          btn.classList.add("copy-btn-copied");
          btn.textContent = "Copied";
          setTimeout(() => {
            btn.classList.remove("copy-btn-copied");
            btn.textContent = original;
          }, 1100);
        } catch {
          setStatus("Could not copy to clipboard.", "error");
        }
      });
    });

    form.addEventListener("submit", async (event) => {
      event.preventDefault();
      const subscriptionId = subscriptionInput.value.trim();

      if (!subscriptionId) {
        setStatus("Please enter a Subscription ID.", "error");
        hideResults();
        return;
      }

      const guidLike = /^[0-9a-fA-F-]{30,}$/;
      if (!guidLike.test(subscriptionId)) {
        setStatus("That does not look like a valid Subscription ID.", "error");
        hideResults();
        return;
      }

      setStatus("Looking up subscription‚Ä¶", "info");
      setResults();
      setLoading(true);
      hideResults();

      try {
        const res = await fetch("/api/lookup", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ subscriptionId }),
        });

        if (!res.ok) {
          let message = "Lookup failed.";
          try {
            const err = await res.json();
            if (err?.error) message = err.error;
          } catch {}
          throw new Error(message);
        }

        const data = await res.json();
        setResults({ subscriptionId, ...data });
        setStatus("Lookup completed.", "success");
        showResults();
      } catch (err) {
        setResults();
        setStatus(err.message || "Lookup failed.", "error");
        hideResults();
      } finally {
        setLoading(false);
      }
    });

    clearBtn.addEventListener("click", () => {
      subscriptionInput.value = "";
      setResults();
      setStatus("");
      hideResults();
      subscriptionInput.focus();
    });

    // Initial empty state
    setResults();
    hideResults();
  </script>
</body>
</html>
